<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Compiling Python Extensions in Windows Inside Virtualenv KenIngle.com</title>

    <link rel="stylesheet" href="http://localhost:8000/theme/css/main.css">
    <link rel="stylesheet" href="http://localhost:8000/theme/css/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <div><img src="" class="grv-img"/></div>
        <div class="title"><a href="http://localhost:8000/">Alex Ravenel </a></div>
        <div class="sub-title"></div>

        <p>
      <div class="view"><a href="http://localhost:8000/pages/about-alex.html">About Alex</a></div>
      <div class="view"><a href="http://localhost:8000/pages/contact-alex.html">Contact Alex</a></div>
    <div class="view"><a href="http://localhost:8000/archives.html">Archives</a></div>
</p>

<!-- Social links -->
<div class="social">
<h4>Follow Me</h4>
<ul>
      <li><a href="http://www.twitter.com/aravenel">twitter</a></li>
      <li><a href="https://github.com/aravenel">github</a></li>
      <li><a href="http://www.linkedin.com/profile/view?id=23712282">linkedin</a></li>
  </ul>
</div>

      </header>
      <section>
      <section id="content" class="body">
  <article>
      <div class="article-title">
        Compiling Python Extensions in Windows Inside Virtualenv
      </div>

    <div class="entry-content">
      <p>
<small>
<abbr class="published" title="2012-08-23T11:53:00">
  Thu 23 August 2012
</abbr> | 
  tags: 
      <a href="http://localhost:8000/tag/coding.html">coding</a>, 
      <a href="http://localhost:8000/tag/programming.html">programming</a>, 
      <a href="http://localhost:8000/tag/python.html">python</a>, 
      <a href="http://localhost:8000/tag/virtualenv.html">virtualenv</a>, 
      <a href="http://localhost:8000/tag/windows.html">windows</a>, 
   -- (<a href="http://localhost:8000/compiling-python-extensions-in-windows-inside-virtualenv.html" rel="bookmark">permalink</a>)
</small>
</p>      <p>If you are writing much Python code, there is a good chance you are
using Virtualenv. If you are doing this under Windows, you may have had
any number of problems (see <a class="reference external" href="http://www.alexravenel.com/?p=82">previous rant</a>).</p>
<p>My most recent issue came with trying to install Celery inside a
virtualenv. My installation was failing when compiling the Billiard
dependency with the following error:</p>
<blockquote>
<p><tt class="docutils literal"><span class="pre">C:\MinGW\bin\gcc.exe</span> <span class="pre">-shared</span> <span class="pre">-s</span> <span class="pre">build\temp.win32-2.7\Release\modules\_billiard\multiprocessing.o</span> <span class="pre">build\temp.win32-2.7\Re</span> lease\modules\_billiard\semaphore.o <span class="pre">build\temp.win32-2.7\Release\modules\_billiard\pipe_connection.o</span> <span class="pre">build\temp.win32-2.</span> 7\Release\modules\_billiard\socket_connection.o <span class="pre">build\temp.win32-2.7\Release\modules\_billiard\win32_functions.o</span> build\t <span class="pre">emp.win32-2.7\Release\modules\_billiard\_billiard.def</span> <span class="pre">-LC:\Users\aravenel\code\WeeklyMenus\venv\libs</span> <span class="pre">-LC:\Users\aravenel</span> \code\WeeklyMenus\venv\PCbuild <span class="pre">-lws2_32</span> <span class="pre">-lpython27</span> <span class="pre">-lmsvcr90</span> <span class="pre">-o</span> <span class="pre">build\lib.win32-2.7\_billiard.pyd</span></tt></p>
<p>c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../../mingw32/bin/ld.exe:
cannot find -lpython27</p>
<p>collect2: ld returned 1 exit status</p>
<p>error: command 'gcc' failed with exit status 1</p>
</blockquote>
<p>This as it turns out is an issue with the Virtualenv not correctly
knowing the location of the Python libraries upon which it depends
(notably libpython27.a). To fix this, simply edit the activate.bat
script in your venv/Scripts folder to add the following line:</p>
<blockquote>
<tt class="docutils literal">set <span class="pre">LIBRARY_PATH=c:\python27\libs</span></tt></blockquote>
<p>Voila. No more compiler errors.</p>
<p>Answer found (as usual!) on <a class="reference external" href="http://stackoverflow.com/questions/1015605/how-do-i-compile-python-c-extensions-using-mingw-inside-a-virtualenv">StackOverflow</a></p>

          </div><!-- /.entry-content -->
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'alexravenel'; // required: replace example with your forum shortname
        var disqus_identifier = "compiling-python-extensions-in-windows-inside-virtualenv.html";

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  </article>
</section>
      </section>
      <footer>
        <p><small>&copy; Alex Ravenel &mdash; Theme based on Sundown by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <!-- Scale fix -->
    <script>
      var metas = document.getElementsByTagName('meta');
      var i;
      
      if (navigator.userAgent.match(/iPhone/i)) {
        for (i=0; i<metas.length; i++) {
          if (metas[i].name == "viewport") {
            metas[i].content = "width=device-width, minimum-scale=1.0, maximum-scale=1.0";
          }
        }
      
        document.addEventListener("gesturestart", gestureStart, false);
      }

      function gestureStart() {
        for (i=0; i<metas.length; i++) {
          if (metas[i].name == "viewport") {
            metas[i].content = "width=device-width, minimum-scale=0.25, maximum-scale=1.6";
          }
        }
      }
    </script>
  </body>
</html>