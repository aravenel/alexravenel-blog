<!DOCTYPE html>
<html lang="en">
<head>
	<link rel="stylesheet" type="text/css" href="http://alexravenel.com/theme/css/style.css">
	<!--<link rel="stylesheet/less" type="text/css" href="/theme/css/style.less">-->
	<!--<script src="/theme/js/less.js" type="text/javascript"></script>-->
	<link rel="stylesheet" type="text/css" href="http://alexravenel.com/theme/css/pygments.css">
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:800,400,300|Inconsolata' rel='stylesheet' type='text/css'>

	<link href="http://alexravenel.com/" type="application/atom+xml" rel="alternate" title="Alex Ravenel ATOM Feed" />
	
	
			<title>Alex Ravenel</title>
		<meta charset="utf-8" />
	</head>
<body>
	<section id="sidebar">
		<figure id="user_logo">
            <a href="http://alexravenel.com"><div class="logo">&nbsp;</div></a>
		</figure>

		<div class="user_meta">
            <h1 id="user"><a href="http://alexravenel.com" class="">Alex Ravenel</a></h1>
			<h2></h2>
						<ul>
																			<li><a href="http://alexravenel.com/pages/about-alex.html">About Alex</a></li>
											<li><a href="http://alexravenel.com/pages/contact.html">Contact</a></li>
													                <br /><br />
                					<li><a href="http://www.twitter.com/aravenel">twitter</a></li>
                					<li><a href="https://github.com/aravenel">github</a></li>
                					<li><a href="http://www.linkedin.com/profile/view?id=23712282">linkedin</a></li>
                			</ul>
		</div>
		<footer>
			<address>
				Powered by <a href="http://pelican.notmyidea.org/">Pelican</a>,
		                theme by <a href="https://github.com/wting/pelican-svbtle">wting</a>.
			</address>
		</footer>
	</section>

	<section id="posts">
			<header>
		<h1>admin's blog</h1>
		<h3>Posted Thu 23 August 2012</h3>
	</header>
	<article>
		<h1 id="title">
			<a href="http://alexravenel.com/compiling-python-extensions-in-windows-inside-virtualenv.html" rel="bookmark"
				title="Permalink to Compiling Python Extensions in Windows Inside Virtualenv">Compiling Python Extensions in Windows Inside Virtualenv</a>
		</h1>
		<p>If you are writing much Python code, there is a good chance you are
using Virtualenv. If you are doing this under Windows, you may have had
any number of problems (see <a class="reference external" href="http://www.alexravenel.com/?p=82">previous rant</a>).</p>
<p>My most recent issue came with trying to install Celery inside a
virtualenv. My installation was failing when compiling the Billiard
dependency with the following error:</p>
<blockquote>
<p><tt class="docutils literal"><span class="pre">C:\MinGW\bin\gcc.exe</span> <span class="pre">-shared</span> <span class="pre">-s</span> <span class="pre">build\temp.win32-2.7\Release\modules\_billiard\multiprocessing.o</span> <span class="pre">build\temp.win32-2.7\Re</span> lease\modules\_billiard\semaphore.o <span class="pre">build\temp.win32-2.7\Release\modules\_billiard\pipe_connection.o</span> <span class="pre">build\temp.win32-2.</span> 7\Release\modules\_billiard\socket_connection.o <span class="pre">build\temp.win32-2.7\Release\modules\_billiard\win32_functions.o</span> build\t <span class="pre">emp.win32-2.7\Release\modules\_billiard\_billiard.def</span> <span class="pre">-LC:\Users\aravenel\code\WeeklyMenus\venv\libs</span> <span class="pre">-LC:\Users\aravenel</span> \code\WeeklyMenus\venv\PCbuild <span class="pre">-lws2_32</span> <span class="pre">-lpython27</span> <span class="pre">-lmsvcr90</span> <span class="pre">-o</span> <span class="pre">build\lib.win32-2.7\_billiard.pyd</span></tt></p>
<p>c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../../mingw32/bin/ld.exe:
cannot find -lpython27</p>
<p>collect2: ld returned 1 exit status</p>
<p>error: command 'gcc' failed with exit status 1</p>
</blockquote>
<p>This as it turns out is an issue with the Virtualenv not correctly
knowing the location of the Python libraries upon which it depends
(notably libpython27.a). To fix this, simply edit the activate.bat
script in your venv/Scripts folder to add the following line:</p>
<blockquote>
<tt class="docutils literal">set <span class="pre">LIBRARY_PATH=c:\python27\libs</span></tt></blockquote>
<p>Voila. No more compiler errors.</p>
<p>Answer found (as usual!) on <a class="reference external" href="http://stackoverflow.com/questions/1015605/how-do-i-compile-python-c-extensions-using-mingw-inside-a-virtualenv">StackOverflow</a></p>


		<div id="article_meta">
							Category:
					<a href="http://alexravenel.com/category/python.html">Python</a>
										<br />Tags:
									<a href="http://alexravenel.com/tag/coding.html">coding</a>
									<a href="http://alexravenel.com/tag/programming.html">programming</a>
									<a href="http://alexravenel.com/tag/python.html">python</a>
									<a href="http://alexravenel.com/tag/virtualenv.html">virtualenv</a>
									<a href="http://alexravenel.com/tag/windows.html">windows</a>
									</div>
	</article>

	<footer>
		<a href="http://alexravenel.com/" class="button_accent">&larr;&nbsp;&nbsp;&nbsp;Back to blog</a>
	</footer>

		<div id="comments">
		<h2>Comments</h2>
		<div id="disqus_thread"></div>
		<script type="text/javascript">
			var disqus_identifier = "compiling-python-extensions-in-windows-inside-virtualenv.html";
			(function() {
				var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
				dsq.src = 'http://alexravenel.disqus.com/embed.js';
				(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
			})();
		</script>
		<noscript>Please enable JavaScript to view <a href="http://disqus.com/?ref_noscript">comments</a>.</noscript>
	</div>
	
	</section>

	</body>
</html>